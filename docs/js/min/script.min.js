function debounce(e,t,l){var n;return function(){var i=this,a=arguments,s=l&&!n;clearTimeout(n),n=setTimeout(function(){n=null,l||e.apply(i,a)},t),s&&e.apply(i,a)}}function lightbox(e,t,l){function n(){e.length>1&&(c.classed("inactive",!1),s.classed("inactive",!1),0==l&&c.classed("inactive",!0),l==e.length-1&&s.classed("inactive",!0));var n=new Image;n.onload=function(){a.attr("src",e[l]),t[l].length>0&&r.text(t[l]).style("display","block")},a.attr("src","../../images/transparent.gif"),n.src=e[l]}var i=d3.select("body").append("div").attr("id","lightbox"),a=i.append("div").attr("id","lghtbx-container").append("div").attr("class","outer").append("div").attr("class","middle").append("div").attr("class","inner").append("img").attr("src","../../images/transparent.gif").on("click",function(){i.remove()});if(i.append("div").text("Close / SchlieÃŸen").attr("id","lghtbx-close").on("click",function(){i.remove()}),e.length>1)var s=i.append("a").attr("id","lghtbx-next").on("click",function(){l<e.length-1&&(l++,n())}),c=i.append("a").attr("id","lghtbx-prev").on("click",function(){l>0&&(l--,n())});var r=i.append("a").attr("id","lghtbx-subline").append("span").style("display","none");n()}var embedResize=debounce(function(){d3.selectAll(".embed").each(function(){var e=d3.select(this).node().clientWidth;d3.select(this).select("img,object,video,iframe").each(function(){var t=d3.select(this).attr("width"),l=d3.select(this).attr("height");d3.select(this).style("height",Math.round(l/t*e)+"px")})})},250);d3.select(".embed").size()>=1&&(window.addEventListener("resize",embedResize),embedResize()),d3.select("#minilogo").size()>=1?d3.selectAll(".gallery li").classed("two-break",function(e,t){return t%2==0}).classed("three-break",function(e,t){return t%3==0}):d3.select("#logo").size()>=1&&(logo(d3.select("#logo"),200,20,5,!1,!0,{min:.2,max:2}),d3.selectAll("#project-list li").classed("two-break",function(e,t){return t%2==0}).classed("three-break",function(e,t){return t%3==0}),d3.selectAll("#team-list li").classed("two-break",function(e,t){return t%2==0}).classed("three-break",function(e,t){return t%3==0}));var galleries=d3.selectAll(".gallery.lghtbx"),links=[],subtitles=[];galleries.each(function(e,t){var l=[],n=[];d3.select(this).selectAll("a").each(function(e,i){var a=d3.select(this);l.push(a.attr("href")),n.push(a.attr("title")),a.on("click",function(){d3.event.preventDefault(),lightbox(links[t],subtitles[t],i)})}),links.push(l),subtitles.push(n)}),d3.selectAll("a.lghtbx").on("click",function(){d3.event.preventDefault();var e=d3.select(this);lightbox([e.attr("href")],[e.attr("title")],0)});